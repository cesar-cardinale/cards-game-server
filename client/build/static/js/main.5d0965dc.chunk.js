(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{45:function(e){e.exports=JSON.parse('{"name":"client","version":"0.1.0","private":true,"dependencies":{"@material-ui/core":"^4.8.1","@material-ui/icons":"^4.5.1","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.4.0","@testing-library/user-event":"^7.2.1","react":"^16.12.0","react-dom":"^16.12.0","react-scripts":"3.3.0","socket.io-client":"^2.3.0"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":"react-app"},"proxy":"http://192.168.1.11:5000","browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"react-router-dom":"^5.1.2"}}')},47:function(e,t,a){e.exports=a.p+"static/media/logo.1b5a21f1.png"},48:function(e,t,a){e.exports=a.p+"static/media/logo_w.8e3b541f.png"},49:function(e,t,a){e.exports=a.p+"static/media/load.1748a6d6.gif"},53:function(e,t,a){e.exports=a(96)},58:function(e,t,a){},87:function(e,t){},90:function(e,t,a){},91:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(43),i=a.n(s),c=(a(58),a(44)),l=a(2),o=a(5),m=a(6),u=a(11),h=a(10),d=a(12),p=a(50),g=a(9),y={development:{endpoint:a(45).proxy},production:{endpoint:window.location.hostname}},v=a(46),f=a.n(v)()(y.production.endpoint),b=function(){function e(t,a,n){Object(o.a)(this,e),this.player1={username:"",IP:"",choice:""},this.player2={username:"",IP:"",choice:""},this.player3={username:"",IP:"",choice:""},this.player4={username:"",IP:"",choice:""},this.team={T1P1:"",T1P2:"",T2P1:"",T2P2:""},this.isTeamSet=!1,this.ident=t,this.isPrivate=a,this.maxPoints=n}return Object(m.a)(e,[{key:"send",value:function(){f.emit("add-game",this)}},{key:"populate",value:function(t){f.emit("get-game",this.ident),f.on("update-game",(function(a){return t(Object.assign(new e,a))}))}},{key:"onUpdate",value:function(t){f.on("update-game",(function(a){return t(Object.assign(new e,a))}))}},{key:"addMate",value:function(e){f.emit("add-mate",this.ident,e)}},{key:"getCurrentPlayer",value:function(e){f.emit("current-player",this.ident),f.on("current-player",(function(t){return e(t)}))}},{key:"setChoice",value:function(t,a,n){f.emit("set-choice",this.ident,n,a),f.on("update-game",(function(a){return t(Object.assign(new e,a))}))}},{key:"getChoice",value:function(){return"king"===this.mostRecurring([this.player1.choice,this.player2.choice,this.player3.choice,this.player4.choice])?"Tirage des rois":"Choix de l'\xe9quipier"}},{key:"mostRecurring",value:function(e){return e.sort((function(t,a){return e.filter((function(e){return e===t})).length-e.filter((function(e){return e===a})).length})).pop()}}],[{key:"getGameByIdent",value:function(t,a){f.emit("getGame",t),f.on("game",(function(t){return a(Object.assign(new e,t))}))}}]),e}(),E=a(47),C=a.n(E),P=a(48),j=a.n(P),k=a(49),O=a.n(k),x=(a(90),a(91),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement(g.a,{exact:!0,path:"/",component:T}),r.a.createElement(g.a,{exact:!0,path:"/Contree",component:N}),r.a.createElement(g.a,{exact:!0,path:"/Contree/Start",component:S}),r.a.createElement(g.a,{exact:!0,path:"/Contree/Join/:ident",component:w}),r.a.createElement(g.a,{exact:!0,path:"/Contree/Play/:ident",component:I}),r.a.createElement(g.a,{exact:!0,path:"/Belote",component:M}))}}]),t}(r.a.Component)),T=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"box menu"},r.a.createElement(L,null),r.a.createElement(J,{link:"/Contree",classTitle:"game",text:"Contr\xe9e"}))}}]),t}(r.a.Component),N=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"box contree"},r.a.createElement(L,null),r.a.createElement("h2",null,"Contr\xe9e"),r.a.createElement("div",{className:"sep"}),r.a.createElement(G,{link:"/"}),r.a.createElement(J,{link:"/Contree/Start",classTitle:"create",text:"Cr\xe9er une partie"}),r.a.createElement(J,{link:"/Contree/Join",classTitle:"join",text:"Rejoindre une partie"}))}}]),t}(r.a.Component),S=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={private:!0,maxPoints:400},a.handleInputChange=a.handleInputChange.bind(Object(l.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(l.a)(a)),a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){document.title="Contr\xe9e - Cr\xe9ation"}},{key:"handleInputChange",value:function(e){var t=e.target,a="private"===t.name&&t.checked?1:"private"!==t.name||t.checked?parseInt(50*Math.round(t.value/50)):0,n=t.name;this.setState(Object(c.a)({},n,a))}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),this.state.maxPoints>=400){var t=Math.random().toString(36).substring(2,10),a=new b(t,this.state.private,this.state.maxPoints);a.send(),this.props.history.replace("/Contree/Join/"+a.ident)}}},{key:"render",value:function(){return r.a.createElement("div",{className:"box contree start"},r.a.createElement(L,null),r.a.createElement("h2",null,"Contr\xe9e"),r.a.createElement("div",{className:"sep"}),r.a.createElement(G,{link:"/Contree"}),r.a.createElement("h3",null,"Cr\xe9ation de la partie"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"Partie priv\xe9e",r.a.createElement("input",{name:"private",type:"checkbox",checked:this.state.private,onChange:this.handleInputChange})),r.a.createElement("div",{className:"private"},"Si cette case est coch\xe9e, seuls les joueurs disposant du lien pourront rejoindre cette partie."),r.a.createElement("br",null),r.a.createElement("label",null,"Nombre max de points \xe0 atteindre",r.a.createElement("input",{name:"maxPoints",type:"number",min:"400",step:"50",value:this.state.maxPoints,onChange:this.handleInputChange})),r.a.createElement("input",{type:"submit",className:"button",value:"Cr\xe9er"})))}}]),t}(r.a.Component),w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={ident:a.props.match.params.ident,game:new b(a.props.match.params.ident,null,null),username:"",currentPlayer:null,cantContinue:!0},a.handleLiveGame=a.handleLiveGame.bind(Object(l.a)(a)),a.handleCurrentPlayer=a.handleCurrentPlayer.bind(Object(l.a)(a)),a.handleChange=a.handleChange.bind(Object(l.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(l.a)(a)),a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){document.title="Contr\xe9e - Partie #"+this.state.game.ident,this.state.game.populate(this.handleLiveGame),this.state.game.getCurrentPlayer(this.handleCurrentPlayer)}},{key:"handleLiveGame",value:function(e){this.setState((function(t){return{game:Object.assign(t.game,e)}})),this.state.game.player1.username&&this.state.game.player2.username&&this.state.game.player3.username&&this.state.game.player4.username&&(document.getElementById("buttonCapacity").classList.add("show"),document.getElementById("form").style.display="none",document.querySelector("h3").style.display="none"),this.state.game.ident!==this.state.ident&&this.props.history.replace("/Contree")}},{key:"handleCurrentPlayer",value:function(e){this.setState((function(t,a){return{currentPlayer:e}})),null!==this.state.currentPlayer&&this.props.history.replace("/Contree/Play/"+this.state.game.ident)}},{key:"handleChange",value:function(e){var t=e.target.value.replace(/\s/g,"").toLowerCase();this.setState({username:t});var a=!1;(this.state.game.player1&&this.state.game.player1.username===t||this.state.game.player2&&this.state.game.player2.username===t||this.state.game.player3&&this.state.game.player3.username===t||this.state.game.player4&&this.state.game.player4.username===t)&&(a=!0),a?(document.getElementById("used").classList.add("show"),this.setState({cantContinue:!0})):t.length<5?(document.getElementById("used").classList.remove("show"),this.setState({cantContinue:!0})):(document.getElementById("used").classList.remove("show"),this.setState({cantContinue:!1}))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.state.game.addMate(this.state.username),this.props.history.replace("/Contree/Play/"+this.state.ident)}},{key:"render",value:function(){return r.a.createElement("div",{className:"box contree username"},r.a.createElement(L,null),r.a.createElement("h2",null,"Contr\xe9e"),r.a.createElement("div",{className:"sep"}),r.a.createElement("h3",null,"Joindre la partie #",this.state.ident),r.a.createElement("div",{className:"sep"}),r.a.createElement("h3",null,"Nom d'utilisateur"),r.a.createElement("form",{id:"form",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),r.a.createElement("div",{id:"used"},r.a.createElement("span",null,this.state.username)," est d\xe9j\xe0 utilis\xe9"),r.a.createElement("input",{type:"submit",id:"buttonStart",className:"button",value:"Commencer",disabled:this.state.cantContinue})),r.a.createElement("span",{id:"buttonCapacity"},r.a.createElement(G,{link:"/Contree"}),r.a.createElement("div",{className:"button start"},"Cette partie est d\xe9j\xe0 pleine, vous ne pouvez pas la rejoindre")))}}]),t}(r.a.Component),I=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={ident:a.props.match.params.ident,game:new b(a.props.match.params.ident,null,null),currentPlayer:void 0},a.handleLiveGame=a.handleLiveGame.bind(Object(l.a)(a)),a.handleCurrentPlayer=a.handleCurrentPlayer.bind(Object(l.a)(a)),a.getMate=a.getMate.bind(Object(l.a)(a)),a.chooseKing=a.chooseKing.bind(Object(l.a)(a)),a.chooseMate=a.chooseMate.bind(Object(l.a)(a)),a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.state.game.populate(this.handleLiveGame),this.state.game.onUpdate(this.handleLiveGame),this.state.game.getCurrentPlayer(this.handleCurrentPlayer),document.title="Contr\xe9e - Partie #"+this.state.game.ident,document.querySelector("html").style.backgroundColor="#3F3F3F",document.querySelector(".logo img").setAttribute("src",j.a)}},{key:"handleLiveGame",value:function(e){this.setState((function(t){return{game:Object.assign(t.game,e)}})),this.state.game.ident!==this.state.ident&&this.props.history.replace("/Contree")}},{key:"handleCurrentPlayer",value:function(e){this.setState((function(t,a){return{currentPlayer:e}})),this.checkIfFull(),void 0===this.state.currentPlayer&&this.props.history.replace("/Contree/Join/"+this.state.game.ident)}},{key:"checkIfFull",value:function(){this.state.game.player1.username&&this.state.game.player2.username&&this.state.game.player3.username&&this.state.game.player4.username&&!this.state.game.isTeamSet&&(document.querySelector("#wait h2").textContent="Choix des \xe9quipes",this.state.currentPlayer.choice||(document.querySelector("#choice").style.display="block"))}},{key:"getMate",value:function(e){if(null!==this.state.currentPlayer&&void 0!==this.state.currentPlayer&&"me"===e)return this.state.currentPlayer;if(null!==this.state.currentPlayer&&void 0!==this.state.currentPlayer){var t,a=0,n=this.state.currentPlayer.username;if(this.state.game.team.T1P1&&this.state.game.team.T1P1===n?(a=1,t=this.state.game.team.T1P2):this.state.game.team.T1P2&&this.state.game.team.T1P2===n?(a=1,t=this.state.game.team.T1P1):this.state.game.team.T2P1&&this.state.game.team.T2P1===n?(a=2,t=this.state.game.team.T2P2):this.state.game.team.T2P2&&this.state.game.team.T2P2===n&&(a=2,t=this.state.game.team.T2P1),t&&"mate"===e)return this.player(t);if(2===a||"first"!==e&&"second"!==e){if(1!==a&&("first"===e||"second"===e)){if(this.state.game.T1P1&&this.state.game.T1P1!==n&&"first"===e)return this.player(this.state.game.T1P1);if(this.state.game.T1P2&&this.state.game.T1P2!==n&&"second"===e)return this.player(this.state.game.T1P2)}}else{if(this.state.game.T2P1&&this.state.game.T2P1!==n&&"first"===e)return this.player(this.state.game.T2P1);if(this.state.game.T2P2&&this.state.game.T2P2!==n&&"second"===e)return this.player(this.state.game.T2P2)}}return{username:"",IP:null,choice:null}}},{key:"player",value:function(e){return this.state.game.player1.username&&this.state.game.player1.username===e?this.state.game.player1:this.state.game.player2.username&&this.state.game.player2.username===e?this.state.game.player2:this.state.game.player3.username&&this.state.game.player3.username===e?this.state.game.player3:this.state.game.player4.username&&this.state.game.player4.username===e?this.state.game.player4:void 0}},{key:"chooseKing",value:function(){this.state.game.setChoice(this.handleLiveGame,"king",this.state.currentPlayer.username),document.querySelector("#choice").remove()}},{key:"chooseMate",value:function(){this.state.game.setChoice(this.handleLiveGame,"mate",this.state.currentPlayer.username),document.querySelector("#choice").remove()}},{key:"watingView",value:function(){if(this.state.game.isTeamSet)return"";var e=this.getMate("me"),t=this.getMate("mate"),a=this.getMate("first"),n=this.getMate("second"),s=null,i="En attente de tous les joueurs ...";return!e.choice&&t.IP&&a.IP&&n.IP&&(s=r.a.createElement("div",{id:"choice"},r.a.createElement(q,{classTitle:"first",event:this.chooseKing,text:"Tirer les rois"}),r.a.createElement(q,{classTitle:"",event:this.chooseMate,text:"Choisir son \xe9quipier"})),i="Choix d'attribution des \xe9quipes"),r.a.createElement("div",{id:"wait"},r.a.createElement("h2",null,i),r.a.createElement("div",{className:"players"},r.a.createElement("div",{className:"player"},r.a.createElement("div",{className:"avatar"},r.a.createElement(B,{username:e.username})),r.a.createElement("p",null,"Joueur 1 (moi)"),e.username,r.a.createElement(D,{user:e})),r.a.createElement("div",{className:"player"},r.a.createElement("div",{className:"avatar"},r.a.createElement(B,{username:t.username})),r.a.createElement("p",null,"Joueur 2"),t.username,r.a.createElement(D,{user:t})),r.a.createElement("div",{className:"player"},r.a.createElement("div",{className:"avatar"},r.a.createElement(B,{username:a.username})),r.a.createElement("p",null,"Joueur 3"),a.username,r.a.createElement(D,{user:a})),r.a.createElement("div",{className:"player"},r.a.createElement("div",{className:"avatar"},r.a.createElement(B,{username:n.username})),r.a.createElement("p",null,"Joueur 4"),n.username,r.a.createElement(D,{user:n}))),s)}},{key:"choiceView",value:function(){if(this.state.game.player1.choice&&this.state.game.player2.choice&&this.state.game.player3.choice&&this.state.game.player4.choice&&!this.game.isTeamSet)return r.a.createElement("div",{id:"choice"},r.a.createElement("h2",null,this.state.game.getChoice()))}},{key:"render",value:function(){return console.log("JEU",this.state.game),r.a.createElement("div",{className:"box contree play"},r.a.createElement(L,null),r.a.createElement("h2",null,"Contr\xe9e - Partie #",this.state.game.ident),r.a.createElement("div",{className:"sep"}),r.a.createElement(G,{link:"/Contree/Join"}),r.a.createElement(F,{link:"/Contree/Join/".concat(this.state.game.ident)}),this.watingView(),this.choiceView())}}]),t}(r.a.Component),M=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"box belote"},r.a.createElement(L,null),r.a.createElement("h2",null,"belote"))}}]),t}(r.a.Component),L=function(){return r.a.createElement("div",{className:"logo"},r.a.createElement("div",null,r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:C.a,alt:"logo"}))))},J=function(e){var t=e.link,a=e.classTitle,n=e.text;return r.a.createElement("a",{href:t},r.a.createElement("div",{className:"button ".concat(a)},n))},q=function(e){var t=e.classTitle,a=e.event,n=e.text;return r.a.createElement("button",{onClick:a,className:"button choice ".concat(t)},n)},G=function(e){var t=e.link;return r.a.createElement("a",{href:t,className:"back"},r.a.createElement("div",null,r.a.createElement("i",{className:"fas fa-arrow-circle-left"})," Retour"))},F=function(e){var t=e.link;return r.a.createElement("div",{className:"shareInput"},"Inviter ",r.a.createElement("i",{className:"fas fa-share-square"})," ",r.a.createElement("input",{type:"text",value:"http://cards-game-server.herokuapp.com".concat(t),disabled:!0}))},B=function(e){var t=e.username;return t?r.a.createElement("img",{alt:"Avatar de ".concat(t),src:"https://avatars.dicebear.com/v2/avataaars/".concat(t,".svg?options[mouth][]=twinkle&options[eyes][]=squint&options[background]=%23FFFFFF")}):r.a.createElement("img",{className:"load",alt:"En attente",src:O.a})};function D(e){var t=e.user;return"king"===t.choice?r.a.createElement("div",{className:"choose"},"Veut tirer les rois"):"mate"===t.choice?r.a.createElement("div",{className:"choose"},"Veut chosir"):null}var V=x;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[53,1,2]]]);
//# sourceMappingURL=main.5d0965dc.chunk.js.map